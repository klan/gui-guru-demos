import { Meta, Canvas } from '@storybook/blocks';
import * as PopoverStories from '../../ui/components/Popover/Popover.stories';

<Meta title="Popover" />

[Popover case studies](https://developer.chrome.com/blog/css-ui-ecommerce-popover)
[Introducing the popover API](https://developer.chrome.com/blog/introducing-popover-api#the_difference_between_a_popover_and_a_dialog)
[Popover API lands in Baseline](https://web.dev/blog/popover-api?hl=en)
[MDN - Popover API](https://developer.mozilla.org/en-US/docs/Web/API/Popover_API)

## Popover

### `<dialog />` vs `[popover]`
Although you can create a a model-like experience with `popover="auto"` it doesn't provide any semantics on its own. Here's some of the **key differences**:

<table>
  <thead>
    <tr>
      <td>`<dialog />` element</td>
      <td>`[popover]` attribute</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <ul>
          <li>Makes the rest of the page inert</li>
          <li>Requires explicit user interaction to close (as a modal)</li>
          <li>Semantically represents an interactive component</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Does not make the rest of the page inert</li>
          <li>Supports "light-dismiss" and does not block</li>
          <li>Does not provide any semantics</li>
          <li>Popover can open on top of popover</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

### When to use what
So, should dialog and popover never mix? No, turning a dialog into a popover by using `<dialog popover>` is perfectly valid. Here's some examples to give you the right idea:
<table>
  <thead>
    <tr>
      <td>`<dialog />`</td>
      <td>`[popover]`</td>
      <td>`<dialog popover />`</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <ul>
          <li>Confirm modal</li>
          <li>Terms and conditions, where user interaction is required as accept</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Tooltips (that scrolls with the page)</li>
          <li>Context/action menus</li>
          <li>Toast/notification</li>
          <li>Date/time/color/content-picker</li>
          <li>Informational modal/drawer</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>A custom informational modal/drawer</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

### Do's and dont's
Choosing the right solution is not about how the UI looks, eg. is it a drawer or not, but how a user should interact with it.
Using either technique saves you from eg. handling state and creating custom logic, and you should carefully choose the right approach based on how much tweaking needs to be done. If you just need a modal that supports light-dismiss, it's probably more efficient using a simple popover, rather than adding extra logic to a dialog to handle light-dismiss, and then having to deal with a blocking behaviour which is not needed.

### Demo

#### `[popover=auto]` (default)
<Canvas of={PopoverStories.Default} />

#### `[popover=manual]`
<Canvas of={PopoverStories.Manual} />
